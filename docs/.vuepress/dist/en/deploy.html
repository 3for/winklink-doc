<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploy WINkLink Node | WINkLink Developer Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/v1/doc/favicon.ico">
    <meta name="description" content="WINkLink Developer Documentation">
    
    <link rel="preload" href="/v1/doc/assets/css/0.styles.80b33373.css" as="style"><link rel="preload" href="/v1/doc/assets/js/app.2c857601.js" as="script"><link rel="preload" href="/v1/doc/assets/js/2.f2b16297.js" as="script"><link rel="preload" href="/v1/doc/assets/js/12.ba475056.js" as="script"><link rel="prefetch" href="/v1/doc/assets/js/10.48fcf582.js"><link rel="prefetch" href="/v1/doc/assets/js/11.9452f0d4.js"><link rel="prefetch" href="/v1/doc/assets/js/13.46041a7c.js"><link rel="prefetch" href="/v1/doc/assets/js/14.3bc4688f.js"><link rel="prefetch" href="/v1/doc/assets/js/15.ccb561fe.js"><link rel="prefetch" href="/v1/doc/assets/js/16.c5d3ca82.js"><link rel="prefetch" href="/v1/doc/assets/js/17.c9435c6d.js"><link rel="prefetch" href="/v1/doc/assets/js/18.12b1d2e4.js"><link rel="prefetch" href="/v1/doc/assets/js/19.b9b0cb89.js"><link rel="prefetch" href="/v1/doc/assets/js/20.c870f8f0.js"><link rel="prefetch" href="/v1/doc/assets/js/21.07f05b3d.js"><link rel="prefetch" href="/v1/doc/assets/js/22.fb119882.js"><link rel="prefetch" href="/v1/doc/assets/js/23.572dfe6f.js"><link rel="prefetch" href="/v1/doc/assets/js/3.0862f354.js"><link rel="prefetch" href="/v1/doc/assets/js/4.273ae178.js"><link rel="prefetch" href="/v1/doc/assets/js/5.71746619.js"><link rel="prefetch" href="/v1/doc/assets/js/6.f5b065ee.js"><link rel="prefetch" href="/v1/doc/assets/js/7.25d11dd2.js"><link rel="prefetch" href="/v1/doc/assets/js/8.add5fbc5.js"><link rel="prefetch" href="/v1/doc/assets/js/9.790d0f70.js">
    <link rel="stylesheet" href="/v1/doc/assets/css/0.styles.80b33373.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v1/doc/en/" class="home-link router-link-active"><!----> <span class="site-name">WINkLink Developer Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/doc/deploy.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/v1/doc/en/deploy.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/doc/deploy.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/v1/doc/en/deploy.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/v1/doc/en/" aria-current="page" class="sidebar-link">Introduction to WINkLink</a></li><li><a href="/v1/doc/en/architecture.html" class="sidebar-link">Design of System Architecture</a></li><li><a href="/v1/doc/en/deploy.html" aria-current="page" class="active sidebar-link">Deploy WINkLink Node</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#before-you-start" class="sidebar-link">Before you start</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#contract-deployment" class="sidebar-link">Contract Deployment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#winkmid-contract" class="sidebar-link">WinkMid Contract</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#oracle-contract" class="sidebar-link">Oracle Contract</a></li></ul></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#node-deployment" class="sidebar-link">Node Deployment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#prepare-node-account" class="sidebar-link">Prepare Node Account</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#required-environment" class="sidebar-link">Required Environment</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#access-executable-program-for-the-node" class="sidebar-link">Access Executable Program for the Node</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#node-configuration" class="sidebar-link">Node Configuration</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#start-a-node" class="sidebar-link">Start a Node</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#add-a-job-to-your-node" class="sidebar-link">Add a Job to Your Node</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#query-jobs" class="sidebar-link">Query Jobs</a></li></ul></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#authorize-a-node-account" class="sidebar-link">Authorize a Node Account</a></li><li class="sidebar-sub-header"><a href="/v1/doc/en/deploy.html#apply-to-be-an-officially-certified-winklink-node" class="sidebar-link">Apply to be an officially certified WINkLink node</a></li></ul></li><li><a href="/v1/doc/en/pricing.html" class="sidebar-link">WINkLink Price Service</a></li><li><a href="/v1/doc/en/v2.html" class="sidebar-link">FluxAggregator</a></li><li><a href="/v1/doc/en/proxy.html" class="sidebar-link">Proxy</a></li><li><a href="/v1/doc/en/glossary.html" class="sidebar-link">Glossary</a></li><li><a href="/v1/doc/en/vrf.html" class="sidebar-link">WINkLink Random number Service</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deploy-winklink-node"><a href="#deploy-winklink-node" class="header-anchor">#</a> Deploy WINkLink Node</h1> <p>This section explains how to join in the WINkLink ecosystem, including deploying oracle contracts and deploying WINkLink node.</p> <p>Currently, the owner of oracle contract is also the operator of the node on WINkLink. With regard to distribution of proceeds, Oracle node accounts process and submit data, and only owners of the oracle contract are entitled to withdraw the handling fees paid by Oracle contract users.</p> <h2 id="before-you-start"><a href="#before-you-start" class="header-anchor">#</a> Before you start</h2> <p>Maintainers for WINkLink need to understand how the TRON platform works, and know about smart contract deployment and the process of calling them. You're suggested to read related <a href="https://cn.developers.tron.network/" target="_blank" rel="noopener noreferrer">TRON official documents<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, particularly those on contract deployment on TronIDE.</p> <h2 id="contract-deployment"><a href="#contract-deployment" class="header-anchor">#</a> Contract Deployment</h2> <p>Employing a decentralized structure, WINkLink features open-source smart contracts and allows any organization or individual to deploy their WINkLink oracle contracts and release these services to the public.</p> <p>Users may pick their sets from all the open services available on WINkLink to create their own aggregated data contracts and benefit from decentralization.</p> <p>Contract address for the project is hosted at: <a href="https://github.com/wink-link/winklink/tree/master/tvm-contracts/v1.0" target="_blank" rel="noopener noreferrer">https://github.com/wink-link/winklink/tree/master/tvm-contracts/v1.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>To compile it, developers need to use <a href="https://github.com/tronprotocol/solidity/releases/tag/0.4.25_Odyssey_v3.2.3" target="_blank" rel="noopener noreferrer">tron-solidity v0.4.25<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (or choose the corresponding version from TronIDE).</p> <p>You may use any of the following tools or libraries for contract deployment and call testing:</p> <ul><li><a href="https://github.com/tronprotocol/wallet-cli" target="_blank" rel="noopener noreferrer">Official wallet-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.developers.tron.network/docs/ide%E5%85%A5%E9%97%A8" target="_blank" rel="noopener noreferrer">TronIDE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.developers.tron.network/docs/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E9%83%A8%E7%BD%B2" target="_blank" rel="noopener noreferrer">TronBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.developers.tron.network/reference#tronwebcontractnew" target="_blank" rel="noopener noreferrer">tronweb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://tronpy.readthedocs.io/en/latest/contract.html#creating-smart-contract" target="_blank" rel="noopener noreferrer">tronpy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/andelf/rust-tron/blob/master/docs/contract.md" target="_blank" rel="noopener noreferrer">rust-tron<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="winkmid-contract"><a href="#winkmid-contract" class="header-anchor">#</a> WinkMid Contract</h3> <p>WINkLink uses WIN (TRC20) as the base token for the whole platform.</p> <p>WINkLink adopts the <code>transferAndCall</code> feature, i.e. calling one of the callback functions while transferring TRC20 tokens to contracts, a feature similar to <a href="https://github.com/ethereum/EIPs/issues/677" target="_blank" rel="noopener noreferrer">ERC677<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> yet adopting different interface parameters.</p> <p>Given that we cannot modify contracts or add interfaces for most of the tokens issued, WINkLink provides <code>WinkMid</code> wrapper contract, which helps wrapping any TRC20 token and provides <code>transferAndCall</code> interface.</p> <p>The contract code is available at <a href="https://github.com/wink-link/winklink/blob/feature/rename2wink/tvm-contracts/v1.0/WinkMid.sol" target="_blank" rel="noopener noreferrer">WinkMid.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>For convenience, Nile TestNet has deployed <code>WinkMid</code> contract and encapsulated the <code>WIN</code> token on it. Developers may use this contract address directly without additional deployment. Users may also claim test TRX and WIN tokens from the Faucet address provided by Nile TestNet.</p> <div class="custom-block tip"><p class="custom-block-title">Nile Testnet</p> <ul><li>WIN TRC20 Contract Address: <code>TLa2f6VPqDgRE67v1736s7bJ8Ray5wYjU7</code></li> <li>WinkMid Contract Address: <code>TFbci8j8Ja3hMLPsupsuYcUMsgXniG1TWb</code></li> <li>Testnet Faucet: <a href="https://nileex.io/join/getJoinPage" target="_blank" rel="noopener noreferrer">https://nileex.io/join/getJoinPage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <p>When deploying WinkMid contract, developers need to provide the encapsulated TRC20 token address (i.e. WIN token address) for the constructor.</p> <p>Developers do not need to call <code>WinkMid</code> contract directly, as it's wink a helper for caller contracts.</p> <h3 id="oracle-contract"><a href="#oracle-contract" class="header-anchor">#</a> Oracle Contract</h3> <p>Oracle contract is deployed on the TRON public chain with the following features:</p> <ul><li>Receive data requests from Consumer Contract and trigger Event Log
<ul><li>WIN transfer as fees, will be sent along with the data request</li></ul></li> <li>Accept data submitted from WINkLink node
<ul><li>WINkLink node monitors Event Log and then learns about the data request</li> <li>Through job configuration, nodes call the corresponding adaptors of different data requests to obtain external data and trigger Oracle contracts to submit data</li> <li>Trigger the callback function of the consumer contract</li></ul></li> <li>Support cancelling data requests</li> <li>Calculate the WIN fee on data requests and claim rewards</li></ul> <p>Contract code is available at <a href="https://github.com/wink-link/winklink/blob/master/tvm-contracts/v1.0/TronOracles.sol" target="_blank" rel="noopener noreferrer">TronOracles.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>WIN token address and WinkMid contract address are needed in the constructor function when deploying an Oracle contract.</p> <p>Oracle contract implements the <code>Ownable</code> interface. The owner of the contract is eligible for managing rewards or destroying the contract.</p> <h2 id="node-deployment"><a href="#node-deployment" class="header-anchor">#</a> Node Deployment</h2> <p>WINkLink node can be deployed after the contract is deployed.</p> <p>WINkLink node (project directory <code>node</code>) code is available at: https://github.com/wink-link/winklink/tree/master/node.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Current node implementation includes the adapter for accessing token price via exchange APIs. Please run the node in a stable network environment outside Mainland China.</p></div> <h3 id="prepare-node-account"><a href="#prepare-node-account" class="header-anchor">#</a> Prepare Node Account</h3> <p>Each WINkLink node must be linked to a TRON account for calling Oracle contract to submit data.</p> <p>After generating the account address and the private key, the developer can test TRX token on the Testnet Faucet page.The token is used for paying the handling fees on calling the smart contracts.</p> <p>Developers can generate account address and private key via one of the following methods:</p> <ul><li><a href="https://github.com/tronprotocol/wallet-cli" target="_blank" rel="noopener noreferrer">Official wallet-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://andelf.gitbook.io/tron/tron-by-example/generate-address-offline" target="_blank" rel="noopener noreferrer">Generate Address Offline<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/ki5fpl/tronj/blob/master/client/src/test/java/com/github/ki5fpl/tronj/client/ClientTest.java#L70" target="_blank" rel="noopener noreferrer">tronj<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/andelf/tronpy/blob/master/examples/generate_address.py" target="_blank" rel="noopener noreferrer">tronpy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Your private key might get leaked if it is transmitted via an untrusted network. Please generate the address and the private key offline.</p></div> <h3 id="required-environment"><a href="#required-environment" class="header-anchor">#</a> Required Environment</h3> <p>WINkLink node relies on a running MySQL instance. Developers can use the system package manager or Docker of the target environment to deploy a MySQL instance.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Here we assume that the username and the password for the MySQL instance deployed locally are <code>root:root</code> respectively. Please use a strong password or other verification methods in the production environment.</p></div> <p>WINkLink node is written in Java language and requires JRE/JDK environment. It is recommended to use Oracle JDK8.</p> <p>WINkLink node requires a nodejs environment. You need to install Nodejs(npm) &gt;= 10.0.</p> <h3 id="access-executable-program-for-the-node"><a href="#access-executable-program-for-the-node" class="header-anchor">#</a> Access Executable Program for the Node</h3> <p>Developers can download from <a href="https://github.com/wink-link/winklink/releases" target="_blank" rel="noopener noreferrer">Github Release<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> page the latest version of WINkLink node executable <code>node-v1.0.jar</code>。</p> <p>Or you can compile following the steps below:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># jdk8 and nodejs(npm) &gt;= 10.0 are needed</span>
<span class="token function">git</span> clone git@github.com:wink-link/winklink.git
<span class="token builtin class-name">cd</span> winklink/

<span class="token comment"># compile</span>
./gradlew build -x <span class="token builtin class-name">test</span>
</code></pre></div><p>After compilation, <code>node-v1.0.jar</code> will be stored in <code>node/build/libs/</code> under the project source code directory.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The compilation process here omits the test (<code>-x test</code>), because the test instance includes the API test instance for token price on exchanges, which will require a stable network environment outside Mainland China.</p></div> <h3 id="node-configuration"><a href="#node-configuration" class="header-anchor">#</a> Node Configuration</h3> <p>WINkLink node is configured using springboot.
All configuration files are under the subdirectory <code>node/src/main/resource</code>.
With <code>application.yml</code> you can specify a db profile to be used.</p> <p>WINkLink 节点使用 springboot 方式配置。所有配置文件位于项目子目录 <code>node/src/main/resource</code>.
<code>application.yml</code> 可以指定使用的具体 profile.</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># application.yml</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token comment"># dev|pro</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
        <span class="token key atrule">active</span><span class="token punctuation">:</span> dev <span class="token comment"># Specify the profile file here, namely `application-dev.yml`</span>
    <span class="token key atrule">jackson</span><span class="token punctuation">:</span>
        <span class="token key atrule">time-zone</span><span class="token punctuation">:</span> GMT+8
        <span class="token key atrule">date-format</span><span class="token punctuation">:</span> yyyy<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>dd HH<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss
    <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
        <span class="token key atrule">multipart</span><span class="token punctuation">:</span>
            <span class="token key atrule">maxRequestSize</span><span class="token punctuation">:</span> <span class="token number">104857600</span> <span class="token comment">#100MB</span>

<span class="token comment"># ... (omitted)</span>
</code></pre></div><p>In <code>application-[ACTIVE_PROFILE_NAME].yml</code> you can specify a MySQL database connection configuration.
By default <code>dev</code> uses local instance. The username and the password are <code>root:root</code>.</p> <p>After the node configuration file is confirmed, it is required to create a <code>key.store</code> file and write the private key of the node account:</p> <div class="language-text extra-class"><pre class="language-text"><code>privatekey=*****(32 bye hex-decoded private key)
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It is for important safety concern that you use files to provide private information instead of command line. In the production environment, set the permission of the private file <code>key.store</code> as 600, meaning that only the owner can read or write the data.</p></div> <h3 id="start-a-node"><a href="#start-a-node" class="header-anchor">#</a> Start a Node</h3> <p>All configuration files need to be copied to the directory that your node is running in,
use the command <code>cp node/src/main/resource/*.yml ./</code>.</p> <p>Start your WINkLink node using the following command:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>java -jar node/build/libs/node-v1.0.jar -k key.store
</code></pre></div><p>Configuration items can also be specified using a command line. For example:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>java -jar node/build/libs/node-v1.0.jar --server.port<span class="token operator">=</span><span class="token number">8081</span> --spring.profiles.active<span class="token operator">=</span>dev --key key.store
</code></pre></div><p>Determine whether your WINkLink node is running properly using the following command:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">tail</span> -f logs/tron.log
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Your node account must have enough TRX tokens for contract calls.
You can apply testnet tokens at Testnet Faucet.</p></div> <h3 id="add-a-job-to-your-node"><a href="#add-a-job-to-your-node" class="header-anchor">#</a> Add a Job to Your Node</h3> <p>The job of your node represents the data service that your node supports, and each job has a unique 32-byte ID. For end users, <code>(Oracle address, job ID)</code> uniquely identifies the data service provided by a WINkLink node. Each WINkLink node can provide multiple data services.</p> <p>When your WINkLink node is running properly, you can add a job to your node via HTTP API:</p> <p>Example: (change the address parameter below to the Oracle contract address deployed in the steps above)</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">curl</span> --location --request POST <span class="token string">'http://localhost:8080/job/specs'</span> <span class="token punctuation">\</span>
  --header <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
    --data-raw <span class="token string">'{
    &quot;initiators&quot;: [
        {
        &quot;type&quot;: &quot;runlog&quot;,
        &quot;params&quot;: {
            &quot;address&quot;: &quot;TR9jYcLWAcQfbKcP5oau1ccSbeW7mdnqg8&quot;
        }
        }
    ],
    &quot;tasks&quot;: [
        {
        &quot;type&quot;: &quot;httpget&quot;,
        &quot;params&quot;: {
            &quot;get&quot;: &quot;https://www.okex.com/api/spot/v3/instruments/TRX-USDT/ticker&quot;,
            &quot;path&quot;: &quot;last&quot;
        }
        },
        {
        &quot;type&quot;: &quot;multiply&quot;,
        &quot;params&quot;: {
            &quot;times&quot;: 1000000
        }
        },
        {
        &quot;type&quot;: &quot;trontx&quot;
        }
    ]
    }'</span>
</code></pre></div><h3 id="query-jobs"><a href="#query-jobs" class="header-anchor">#</a> Query Jobs</h3> <p>Request example:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">curl</span> --location --request GET <span class="token string">'http://localhost:8080/job/specs'</span>
</code></pre></div><h2 id="authorize-a-node-account"><a href="#authorize-a-node-account" class="header-anchor">#</a> Authorize a Node Account</h2> <p>The node account requires authorization to submit data to the Oracle contract, otherwise an error <code>&quot;Not an authorized node to fulfill requests&quot;</code> will be reported.</p> <p>The owner of the Oracle contract is required to call the contract below and add the node account to the whitelist:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// setFulfillmentPermission(address,bool) [7fcd56db]</span>
<span class="token keyword">function</span> <span class="token function">setFulfillmentPermission</span><span class="token punctuation">(</span><span class="token parameter">address _node<span class="token punctuation">,</span> bool _allowed</span><span class="token punctuation">)</span>
</code></pre></div><p><code>_node</code> refers to the node account address. When <code>_allowed</code> is <code>true</code>,
the account is authorized; when it is <code>false</code>, the authorization is revoked.</p> <p>Call example: <code>setFulfillmentPermission(TGQVLckg1gDZS5wUwPTrPgRG4U8MKC4jcP, true)</code>.</p> <p>Contract calls can be made via any of the following tools or libraries:</p> <ul><li>TronScan: <a href="https://tronscan.org/" target="_blank" rel="noopener noreferrer">Mainnet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://nile.tronscan.org/" target="_blank" rel="noopener noreferrer">Nile Testnet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/tronprotocol/wallet-cli" target="_blank" rel="noopener noreferrer">Official wallet-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.developers.tron.network/docs/ide%E5%85%A5%E9%97%A8" target="_blank" rel="noopener noreferrer">TronIDE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.developers.tron.network/docs/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E9%83%A8%E7%BD%B2" target="_blank" rel="noopener noreferrer">TronBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.developers.tron.network/reference#tronwebcontractat" target="_blank" rel="noopener noreferrer">tronweb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://tronpy.readthedocs.io/en/latest/contract.html#creating-smart-contract" target="_blank" rel="noopener noreferrer">tronpy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/andelf/rust-tron/blob/master/docs/contract.md" target="_blank" rel="noopener noreferrer">rust-tron<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="apply-to-be-an-officially-certified-winklink-node"><a href="#apply-to-be-an-officially-certified-winklink-node" class="header-anchor">#</a> Apply to be an officially certified WINkLink node</h2> <p>Your node can provide services to the public after the steps above are performed.</p> <p>You can share your node's Oracle contract address and job ID of supported data services to the community. You can also apply to be a node officially certified by WINkLink and be listed on the WINkLink website.</p> <p><a href="https://docs.google.com/forms/d/e/1FAIpQLSdufboAPr-ApgF3D7GHlUFUIlctsosualKI0IiRreMlwX-Eaw/viewform" target="_blank" rel="noopener noreferrer">Application form<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v1/doc/en/architecture.html" class="prev">
        Design of System Architecture
      </a></span> <span class="next"><a href="/v1/doc/en/pricing.html">
        WINkLink Price Service
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v1/doc/assets/js/app.2c857601.js" defer></script><script src="/v1/doc/assets/js/2.f2b16297.js" defer></script><script src="/v1/doc/assets/js/12.ba475056.js" defer></script>
  </body>
</html>
