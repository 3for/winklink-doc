(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{385:function(t,e,a){"use strict";a.r(e);var s=a(24),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"winklink-price-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#winklink-price-service"}},[t._v("#")]),t._v(" WINkLink Price Service")]),t._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),a("p",[t._v("It is required that smart contracts frequently echo the token prices in the real world. For DeFi in particular, asset prices must be highly aligned with real-world prices, otherwise users and developers may suffer losses caused by arbitrage or attacks on the contract.")]),t._v(" "),a("p",[t._v("WINkLink's price service focuses on digital currency pairs, providing DApps with accurate and stable price information of real-world digital currencies.")]),t._v(" "),a("p",[t._v("The solution provided by WINkLink aggregates price data of multiple WINkLink oracle nodes that leads to a stable price service, which is called the Price Feed Contract.")]),t._v(" "),a("p",[t._v("We are going to explore how to use and deploy the WINkLink price service contract in the following sections.")]),t._v(" "),a("h2",{attrs:{id:"acquire-latest-prices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acquire-latest-prices"}},[t._v("#")]),t._v(" Acquire Latest Prices")]),t._v(" "),a("p",[t._v("Acquiring the latest price data in the consumer contract requires "),a("code",[t._v("AggregatorInterface")]),t._v(". It defines the interface that the Price Feed Contract provides to the public.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("pragma solidity "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AggregatorInterface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("latestAnswer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" external view "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int256"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("latestTimestamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" external view "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uint256"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("latestRound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" external view "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uint256"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAnswer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("uint256 roundId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" external view "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int256"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimestamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("uint256 roundId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" external view "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uint256"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ncontract PriceConsumer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    AggregatorInterface internal priceFeed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Price Aggregator Address: TYZxQSHAhxGgUWzxYEZAohvWc9cQWXtNBt\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        priceFeed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AggregatorInterface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xF7e52418572834722ED87E9425d673FEdBD55a0e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Returns the latest price\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLatestPrice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" view "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If the round is not complete yet, timestamp is 0")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("priceFeed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("latestTimestamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Round not complete"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" priceFeed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("latestAnswer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"price-history"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#price-history"}},[t._v("#")]),t._v(" Price History")]),t._v(" "),a("p",[t._v("Price history can be acquired from the "),a("code",[t._v("AggregatorInterface")]),t._v(" interface function list via "),a("code",[t._v("getAnswer(uint256 roundId)")]),t._v(".The corresponding timestamp can be acquired via "),a("code",[t._v("getTimestamp(uint256 roundId)")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"price-feed-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#price-feed-contract"}},[t._v("#")]),t._v(" Price Feed Contract")]),t._v(" "),a("h3",{attrs:{id:"mainnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mainnet"}},[t._v("#")]),t._v(" Mainnet")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Pair")]),t._v(" "),a("th",[t._v("Price Feed Contract Address")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("TRX-USD")]),t._v(" "),a("td",[a("code",[t._v("TNwqbPTDLgGQVfLz75NnaMfsrVHbKQBuCo")])])]),t._v(" "),a("tr",[a("td",[t._v("JST-USD")]),t._v(" "),a("td",[a("code",[t._v("TAKipCT5xdCKkB8BTEGV8A9pysbnLSbK4v")])])]),t._v(" "),a("tr",[a("td",[t._v("SUNOLD-USD")]),t._v(" "),a("td",[a("code",[t._v("THVdX8xZfjUtZEHFYDzZhQF6HzwjBeivo6")])])]),t._v(" "),a("tr",[a("td",[t._v("BTC-USD")]),t._v(" "),a("td",[a("code",[t._v("TFBF8bBpQbrhzEZbTyXXPmB3a4tXmqqk7Y")])])]),t._v(" "),a("tr",[a("td",[t._v("WIN-USD")]),t._v(" "),a("td",[a("code",[t._v("TBdQHu2hd5obmikZWn4KkuqmxaN1LCEp4U")])])]),t._v(" "),a("tr",[a("td",[t._v("DICE-USD")]),t._v(" "),a("td",[a("code",[t._v("TYQh9z6g2aGB1mQwRzGvdFphkt1nEjAMY2")])])]),t._v(" "),a("tr",[a("td",[t._v("USDJ-USD")]),t._v(" "),a("td",[a("code",[t._v("TBbg182ovR4Ra282MERwDwiyCVS2gtjF8g")])])]),t._v(" "),a("tr",[a("td",[t._v("JST-TRX")]),t._v(" "),a("td",[a("code",[t._v("TCf4vSQLbHBFKzezHudEpvnhJ5GNQ6F2Ex")])])]),t._v(" "),a("tr",[a("td",[t._v("WIN-TRX")]),t._v(" "),a("td",[a("code",[t._v("TR6LAm2T1kdqgZBYWBtyS9HXs11KhvK5cq")])])]),t._v(" "),a("tr",[a("td",[t._v("DICE-TRX")]),t._v(" "),a("td",[a("code",[t._v("TLjFYyi7Va3nUfEgUiL5S1YgLqPYjv7aF4")])])]),t._v(" "),a("tr",[a("td",[t._v("LIVE-USD")]),t._v(" "),a("td",[a("code",[t._v("TBpcwZo2Vk825nss6WSSdhVz7NWqt5aS1U")])])]),t._v(" "),a("tr",[a("td",[t._v("USDT-USD")]),t._v(" "),a("td",[a("code",[t._v("TZ8u8sz1ToRfGaQ5JbYNwEiuRTXUBe9tFx")])])]),t._v(" "),a("tr",[a("td",[t._v("SUNOLD-TRX")]),t._v(" "),a("td",[a("code",[t._v("TE14YrYpFtrPqxVSQ6V4WUsTniwfdcxbAR")])])]),t._v(" "),a("tr",[a("td",[t._v("BTC-TRX")]),t._v(" "),a("td",[a("code",[t._v("TGNLjD435kXGoHi9JiFvrDr9SQE6eyu91X")])])]),t._v(" "),a("tr",[a("td",[t._v("USDJ-TRX")]),t._v(" "),a("td",[a("code",[t._v("TDQA9eG9tmS7JbbFbzfcxvQn1Z9xuPt62V")])])]),t._v(" "),a("tr",[a("td",[t._v("USDT-TRX")]),t._v(" "),a("td",[a("code",[t._v("TWBz6RPTbgEu9qY72NNRSZprD88DnHzizw")])])]),t._v(" "),a("tr",[a("td",[t._v("BTT-USD")]),t._v(" "),a("td",[a("code",[t._v("THNCvWFdV3Qe2SeFWzz95XvjjsmBPtHi6q")])])]),t._v(" "),a("tr",[a("td",[t._v("BTT-TRX")]),t._v(" "),a("td",[a("code",[t._v("TSEu2g6oD5ukHYvKbn2shc9mdpELySgbv9")])])]),t._v(" "),a("tr",[a("td",[t._v("ETH-TRX")]),t._v(" "),a("td",[a("code",[t._v("TENtY6C9WiCpGenjUFwf33DYTcrV7GEZuh")])])])])]),t._v(" "),a("h3",{attrs:{id:"nile-testnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nile-testnet"}},[t._v("#")]),t._v(" Nile Testnet")]),t._v(" "),a("ul",[a("li",[t._v("Contract List"),a("a",{attrs:{href:"http://47.252.73.5:3300/#/solutions",target:"_blank",rel:"noopener noreferrer"}},[t._v("View Page"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("WIN    Token Contract Address: "),a("code",[t._v("TNDSHKGBmgRx9mDYA9CnxPx55nu672yQw2")])]),t._v(" "),a("li",[t._v("WinkMid Contract Address: "),a("code",[t._v("TFbci8j8Ja3hMLPsupsuYcUMsgXniG1TWb")])])]),t._v(" "),a("p",[t._v("List of price service contract addresses:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Pair")]),t._v(" "),a("th",[t._v("Price Feed Contract Address")]),t._v(" "),a("th",[t._v("Oracle Contract Address")]),t._v(" "),a("th",[t._v("job id")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("TRX-USD")]),t._v(" "),a("td",[a("code",[t._v("TAL6RWymPLepKsLGCzWPUTKQQcWFsuHfNE")])]),t._v(" "),a("td",[a("code",[t._v("TRDh1Hi4Hugb4J7DiQfvW6mCf8xGTEsQ66")]),a("br"),a("code",[t._v("TVKZGaPgSg8r3Pjyd5LsvbYEM5WRwfMetc")]),a("br"),a("code",[t._v("TQdYZe2XK2MwXx4PgDLuTWy4rhsc1A87wu")]),a("br"),a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")]),a("br"),a("code",[t._v("TEx4rxit3Au6ek5avy4Aiy1N6Fyt38AS3o")])]),t._v(" "),a("td",[a("code",[t._v("bb347a9a63324fd995a7159cb0c8348a")]),a("br"),a("code",[t._v("40691f5fd4b64ab4a5442477ed484d80")]),a("br"),a("code",[t._v("f7ccb652cc254a19b0b954c49af25926")]),a("br"),a("code",[t._v("38cd68072a6c4a0ca05e9b91976cf4f1")]),a("br"),a("code",[t._v("328697ef599043e1a301ae985d06aabf")])])]),t._v(" "),a("tr",[a("td",[t._v("JST-USD")]),t._v(" "),a("td",[a("code",[t._v("TYr8nvS9BUbi9eLXNQpUMbxdvwYpoWn3ho")])]),t._v(" "),a("td",[a("code",[t._v("TRDh1Hi4Hugb4J7DiQfvW6mCf8xGTEsQ66")]),a("br"),a("code",[t._v("TVKZGaPgSg8r3Pjyd5LsvbYEM5WRwfMetc")]),a("br"),a("code",[t._v("TQdYZe2XK2MwXx4PgDLuTWy4rhsc1A87wu")]),a("br"),a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("b09f188f336844e2b4f93ec7c2cc238f")]),a("br"),a("code",[t._v("ca97ef49175a44078c2c2933287915fd")]),a("br"),a("code",[t._v("1f26180c61824d25b822d76972f16d7d")]),a("br"),a("code",[t._v("c10608a577214eba904a7673d4e97fca")])])]),t._v(" "),a("tr",[a("td",[t._v("SUNOLD-USD")]),t._v(" "),a("td",[a("code",[t._v("TWWjBHU3KkuV65rTVkA4UrCrGwBRTXs3KK")])]),t._v(" "),a("td",[a("code",[t._v("TRDh1Hi4Hugb4J7DiQfvW6mCf8xGTEsQ66")]),a("br"),a("code",[t._v("TVKZGaPgSg8r3Pjyd5LsvbYEM5WRwfMetc")]),a("br"),a("code",[t._v("TQdYZe2XK2MwXx4PgDLuTWy4rhsc1A87wu")]),a("br"),a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("884366e5e9e441d6a792f77907778345")]),a("br"),a("code",[t._v("e109e9a1dc26475a834446509468ac59")]),a("br"),a("code",[t._v("d528c7c0d4784d0d9b53b932694b44fe")]),a("br"),a("code",[t._v("3f0a614654704ec3b50da1612b478ecb")])])]),t._v(" "),a("tr",[a("td",[t._v("BTC-USD")]),t._v(" "),a("td",[a("code",[t._v("TYY5GdNvHN8NVY6MYtgEPwx15pyUmLEw5J")])]),t._v(" "),a("td",[a("code",[t._v("TRDh1Hi4Hugb4J7DiQfvW6mCf8xGTEsQ66")]),a("br"),a("code",[t._v("TVKZGaPgSg8r3Pjyd5LsvbYEM5WRwfMetc")]),a("br"),a("code",[t._v("TQdYZe2XK2MwXx4PgDLuTWy4rhsc1A87wu")]),a("br"),a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")]),a("br"),a("code",[t._v("TEx4rxit3Au6ek5avy4Aiy1N6Fyt38AS3o")])]),t._v(" "),a("td",[a("code",[t._v("5a0f83ca61d74bad961acd0912adc53f")]),a("br"),a("code",[t._v("4f929a07ad1b4efba8fa686ad9641738")]),a("br"),a("code",[t._v("7c2457a191bf43488419adf7c48d4ff0")]),a("br"),a("code",[t._v("83d851c6627e4fed8c0e24292e1dc42f")]),a("br"),a("code",[t._v("1fc45a68c7f346229f08aee1982daa0e")])])]),t._v(" "),a("tr",[a("td",[t._v("WIN-USD")]),t._v(" "),a("td",[a("code",[t._v("TGPDYFAcFx8ZXf7sGTLwbvsDh8FdEnsNyN")])]),t._v(" "),a("td",[a("code",[t._v("TVKZGaPgSg8r3Pjyd5LsvbYEM5WRwfMetc")]),a("br"),a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("2f6c1f3dbb634e60910da542df34a94a")]),a("br"),a("code",[t._v("ca4821f3c5ef4b2cb8ee330a6f634520")])])]),t._v(" "),a("tr",[a("td",[t._v("DICE-USD")]),t._v(" "),a("td",[a("code",[t._v("TS8fAMLNnbWgNyXz6queFHR7HfZkhAeppK")])]),t._v(" "),a("td",[a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("ad7888ed606d4b249edd298791f0c2d7")])])]),t._v(" "),a("tr",[a("td",[t._v("USDJ-USDT")]),t._v(" "),a("td",[a("code",[t._v("TMmh7ZJkXpz4fE9FyFvRByMwvBE5Z2cRj8")])]),t._v(" "),a("td",[a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("b0ec07370a734d0cbdfabf6fe0e903c0")])])]),t._v(" "),a("tr",[a("td",[t._v("JST-TRX")]),t._v(" "),a("td",[a("code",[t._v("THs9f15hC6r6rWzAE2NBUyiX2SetwDCnYD")])]),t._v(" "),a("td",[a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("4ac87bf722da4659ae9989c2ad7646ae")])])]),t._v(" "),a("tr",[a("td",[t._v("WIN-TRX")]),t._v(" "),a("td",[a("code",[t._v("TReQocbkKBbGrgzoYWQ8bJnCNG1LGehwZw")])]),t._v(" "),a("td",[a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("febfcef0ce234fbdabaad191f2c4c542")])])]),t._v(" "),a("tr",[a("td",[t._v("DICE-TRX")]),t._v(" "),a("td",[a("code",[t._v("TSejCUHkk5gD2UjtoPt3n3rdByTbKLac4Q")])]),t._v(" "),a("td",[a("code",[t._v("TFKq9ZyySXFe1iCtWyYAFbJFCV9uEt5ghb")])]),t._v(" "),a("td",[a("code",[t._v("c22e485bb31a4680b7eff3dc590d8c8f")])])])])]),t._v(" "),a("h3",{attrs:{id:"apply-for-new-trading-pairs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apply-for-new-trading-pairs"}},[t._v("#")]),t._v(" Apply for New Trading Pairs")]),t._v(" "),a("p",[t._v("If you need WINkLink to provide a new trading pair officially,\nplease fill in and submit the "),a("a",{attrs:{href:"https://docs.google.com/forms/d/e/1FAIpQLSdt0xu6Sw7llvV0yu-4qJGkh3gvfBVFr_YPv01CEl7P19yXSQ/viewform",target:"_blank",rel:"noopener noreferrer"}},[t._v("this form"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"deply-the-price-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deply-the-price-service"}},[t._v("#")]),t._v(" Deply the Price Service")]),t._v(" "),a("p",[t._v("Developers can deploy their own price services and customize price sources and the minimum number of response oracles.")]),t._v(" "),a("p",[t._v("In real production, price feed requires multiple oracle nodes, which will be aggregated into a final price. But for the test, we only set up one node for price feed to streamline the test.")]),t._v(" "),a("h3",{attrs:{id:"deploy-the-price-feed-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-price-feed-contract"}},[t._v("#")]),t._v(" Deploy the Price Feed Contract")]),t._v(" "),a("p",[t._v("Launched by WINkLink, the "),a("code",[t._v("TronUser")]),t._v(" contract is a contract template for aggregated price service. The contract applies the "),a("code",[t._v("AggregatorInterface")]),t._v(" which developers can use directly.")]),t._v(" "),a("p",[t._v("The contract code is located at "),a("a",{attrs:{href:"https://github.com/wink-link/winklink/blob/master/tvm-contracts/v1.0/TronUser.sol",target:"_blank",rel:"noopener noreferrer"}},[t._v("TronUser.sol"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("In deploying the TronUser contract, the WIN token address and WinkMid contract address are required in the constructor. For example, on Nile TestNet,\n"),a("code",[t._v("(TNDSHKGBmgRx9mDYA9CnxPx55nu672yQw2, TFbci8j8Ja3hMLPsupsuYcUMsgXniG1TWb)")]),t._v(" is required.")]),t._v(" "),a("h3",{attrs:{id:"add-an-oracle-node-and-a-job-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-an-oracle-node-and-a-job-id"}},[t._v("#")]),t._v(" Add an Oracle Node and a job ID")]),t._v(" "),a("p",[t._v("After the TronUser contract is deployed, the contract owner should set up an oracle service list of the aggregated requests for the contract with the following interface:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateRequestDetails")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("uint128 _paymentAmount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uint128 _minimumResponses"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" _oracles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" _jobIds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("code",[t._v("_paymentAmount")]),t._v(" refers to the amount of tokens paid for updating the call each time.")]),t._v(" "),a("p",[a("code",[t._v("_oracles")]),t._v(" and "),a("code",[t._v("_jobIds")]),t._v(" are a pair of lists with equal length. Each set represents a unique job ID of a WINkLink oracle.")]),t._v(" "),a("p",[a("code",[t._v("_minimumResponses")]),t._v(" refers to the minimum number of response oracles. It must be greater than or equal to the length of "),a("code",[t._v("_oracles")]),t._v(". For example, you can set it to 5/10 so that only when at least 5/10 oracles have responded will the upgraded value become valid.")]),t._v(" "),a("p",[t._v("Call example:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateRequestDetails")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TR9jYcLWAcQfbKcP5oau1ccSbeW7mdnqg8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"db22ccf4b4a14d0cae2a0757632e425d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"transfer-win-tokens-to-the-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transfer-win-tokens-to-the-contract"}},[t._v("#")]),t._v(" Transfer WIN Tokens to the Contract")]),t._v(" "),a("p",[t._v("TronUser contract needs "),a("code",[t._v("transferAndCall")]),t._v(" to call the Oracle contract, so there should be enough WIN tokens in the contract account. You can transfer a certain amount of WIN tokens for the contract through the transfer service or the TestNet Faucet.")]),t._v(" "),a("h3",{attrs:{id:"call-the-price-feed-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#call-the-price-feed-contract"}},[t._v("#")]),t._v(" Call the Price Feed Contract")]),t._v(" "),a("h4",{attrs:{id:"update-prices-with-requestrateupdate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-prices-with-requestrateupdate"}},[t._v("#")]),t._v(" Update Prices with requestRateUpdate")]),t._v(" "),a("p",[t._v("Use the following interface to request WINkLink oracle nodes to acquire the latest price information from external data sources:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestRateUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bytes32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("The interface returns a "),a("code",[t._v("requestID")]),t._v(", which can also be used to cancel this price update request.")]),t._v(" "),a("h4",{attrs:{id:"acquire-latest-prices-with-latestanswer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acquire-latest-prices-with-latestanswer"}},[t._v("#")]),t._v(" Acquire Latest Prices with latestAnswer")]),t._v(" "),a("p",[t._v("Acquire latest prices by calling "),a("code",[t._v("latestAnswer()")]),t._v(" in "),a("code",[t._v("AggregatorInterface")]),t._v(".")]),t._v(" "),a("p",[t._v("You can call it to on the TronScan's contract information page.")])])}),[],!1,null,null,null);e.default=r.exports}}]);